---
// import type { GetStaticPaths } from "astro";
import { type APIFakeStore } from "../types/api";
import Layout from "../layouts/Layout.astro";

export const prerender = false;
const { id } = Astro.params;
const res = await fetch(`https://api.escuelajs.co/api/v1/products/${id}`);
const product = (await res.json()) as APIFakeStore;

//! Numero finito y conocido
/*
export async function getStaticPaths() {
  const res = await fetch('https://api.escuelajs.co/api/v1/products?offset=0&limit=30');
  const products = (await res.json()) as APIFakeStore[];
  return products.map((product) => ({
    params: {id: product.id}
  }))
  /*
  return [
    {params: { id: 10}},
    {params: { id: 11}},
    {params: { id: 12}},
    {params: { id: 13}},
    {params: { id: 14}},
    {params: { id: 15}},
    {params: { id: 16}},
    {params: { id: 17}},
    {params: { id: 18}},
    {params: { id: 19}},
    {params: { id: 20}},
    {params: { id: 21}},
    {params: { id: 22}},
    {params: { id: 23}},
    {params: { id: 24}},
    {params: { id: 25}},
    {params: { id: 26}},
    {params: { id: 27}},
    {params: { id: 28}},
    {params: { id: 29}},
    {params: { id: 30}},
    {params: { id: 31}},
    {params: { id: 32}},
    {params: { id: 33}},
    {params: { id: 34}},
    {params: { id: 35}},
    {params: { id: 36}},
    {params: { id: 37}},
    {params: { id: 38}},
    {params: { id: 39}},
  ];
}
*/
---

<Layout title={`${product.title}`}>
  <section class="py-16 px-8">
    <div
      class="mx-auto container grid place-items-center grid-cols-1 md:grid-cols-2"
    >
      <img
        src={product.images[0]}
        alt="pink blazer"
        class="rounded-md aspect-square size-96"
      />
      <div>
        <h2 class="mb-4 text-3xl">{product.title}</h2>
        <h5>${product.price}</h5>
        <p class="!mt-4 text-base font-normal leading-[27px] !text-gray-500">
          {product.description}
        </p>
        <div class="mb-4 flex w-full items-center gap-3 md:w-1/2">
          <button
            class="w-52 border border-blue-500 rounded-md bg-blue-900 h-10 mt-5"
          >
            Add to Cart
          </button>
        </div>
      </div>
    </div>
  </section>
</Layout>
